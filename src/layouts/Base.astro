---
import { DonationButtons, GetInTouch, Navigation } from '@components';
import { getDonationOptions } from '../data/stripe';

const { enabled: donationsEnabled, options: donationOptions } =
	await getDonationOptions();

export interface Props {
	subtitle?: string;
	title: string;
	useTitleGradient?: boolean;
}

const { subtitle, title, useTitleGradient } = Astro.props as Props;

const jsonLDSchema = JSON.stringify(
	{
		'@context': 'http://www.schema.org',
		'@type': 'EducationalOrganization',
		name: 'The Collab Lab',
		logo: 'https://the-collab-lab.codes/img/sig-logo.png',
		image: 'https://the-collab-lab.codes/img/sig-logo.png',
		description:
			'Gain practical experience by working remotely on real world projects with other early-career developers.',
	},
	null,
	0,
);
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<link
			rel="preload"
			as="font"
			type="font/woff2"
			href="/fonts/source-sans-pro-latin-300.woff2"
			crossorigin
		/>
		<link
			rel="preload"
			as="font"
			type="font/woff2"
			href="/fonts/source-sans-pro-latin-600.woff2"
			crossorigin
		/>
		{
			donationsEnabled && (
				<link rel="dns-prefetch" href="https://js.stripe.com/v3" />
			)
		}
		<script
			type="application/ld+json"
			set:html={JSON.stringify(jsonLDSchema, null, 0)}
		></script>
	</head>
	<body>
		<Navigation />
		<header>
			<h1 class={useTitleGradient ? 'text-gradient' : null}>{title}</h1>
			{subtitle && <h2 set:html={subtitle} />}
		</header>
		<main>
			<slot />
		</main>
		<footer>
			<div class="sponsors-container">
				<h2 id="support">Support Collab Lab!</h2>
				<p>
					The Collab Lab is
					<strong>volunteer-driven and free for developers.</strong>
					We intentionally and actively work to overcome barriers to opportunities
					for women and under-represented minorities in tech.
				</p>
				<p>
					We make use of free/
					<a href="https://www.dictionary.com/browse/freemium">freemium</a>
					tools (i.e. Airtable, Firebase, GitHub, Google Docs, Netlify, Slack, Notion,
					and Zoom) as much as possible. We would love to have the ability to use
					upgraded versions of some of these tools to provide a better experience
					for our volunteers and developers. To this end, we accept
					<a href="https://github.com/sponsors/the-collab-lab">
						sponsorships through GitHub
					</a>. ❤️
				</p>
				<iframe
					height="35"
					loading="lazy"
					src="https://github.com/sponsors/the-collab-lab/button"
					style="border: 0"
					title="Sponsor the-collab-lab"
					width="116"></iframe>
			</div>
			We also accept direct donations. Please consider supporting The Collab Lab
			with a one-time donation.
			<DonationButtons
				options={donationOptions}
				enabled={donationsEnabled}
				client:visible
			/>
			<GetInTouch />
			<div class="copyright">
				<p>
					Made with
					<a href="https://astro.build/">Astro</a> and
					<a href="https://hygraph.com/">Hygraph</a>. Deployed on <a
						href="https://www.netlify.com/">Netlify</a
					>.
				</p>
				<p>
					Copyright &copy; 2019 – {new Date().getFullYear()} The Collab Lab. All
					rights reserved.
				</p>
				<p>
					All participants agree to adhere to our
					<a href="/code-of-conduct/">Code of Conduct</a>.
				</p>
			</div>
		</footer>
		<style>
			@font-face {
				font-family: 'Source Sans Pro';
				font-display: swap;
				font-style: normal;
				font-weight: 300;
				src: url('/fonts/source-sans-pro-latin-300.woff2') format('woff2'),
					url('/fonts/source-sans-pro-latin-300.woff') format('woff');
			}

			@font-face {
				font-family: 'Source Sans Pro';
				font-display: swap;
				font-style: normal;
				font-weight: 600;
				src: url('/fonts/source-sans-pro-latin-600.woff2') format('woff2'),
					url('/fonts/source-sans-pro-latin-600.woff') format('woff');
			}

			:root {
				font-size: 62.5%;

				--font-size-base: clamp(1.6rem, 0.34vw + 1.456rem, 1.904rem);
				--font-size-lg: clamp(1.92rem, 0.7vw + 1.92rem, 2.4rem);
				--font-size-xl: clamp(3.904rem, 2.38vw + 2.96rem, 6rem);

				--color-text: hsl(12, 5%, 4%);
				--color-bg: hsl(10, 21%, 95%);
				--color-border: hsl(17, 24%, 90%);
				--astro-gradient: linear-gradient(0deg, #4f39fa, #da62c4);
			}

			html {
				font-family: 'Source Sans Pro', system-ui, sans-serif;
				color: var(--color-text);
				background-color: var(--color-bg);
			}

			body {
				font-size: var(--font-size-base);
				margin: 0;
			}

			:global(:is(footer, header, main, nav, section)) {
				margin: auto;
				max-width: 95%;
			}

			:global(main) {
				padding: 1em;
			}

			:global(h1) {
				font-size: var(--font-size-xl);
				text-align: center;
			}

			:global(h2) {
				font-size: var(--font-size-lg);
			}

			:global(header > h2) {
				font-weight: 400;
			}

			:global(code) {
				font-family: Menlo, Monaco, Lucida Console, Liberation Mono,
					DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace;
			}

			:global(.text-gradient) {
				font-weight: 900;
				background-image: var(--astro-gradient);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
				background-size: 100% 200%;
				background-position-y: 100%;
				border-radius: 0.4rem;
				animation: pulse 4s ease-in-out infinite;
			}

			@media (prefers-reduced-motion: reduce) {
				.text-gradient {
					animation: none;
				}
			}
		</style>
	</body>
</html>
